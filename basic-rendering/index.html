
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://libplacebo.org/basic-rendering/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../renderer/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Basic windowing / output example - libplacebo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-windowing-output-example" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="libplacebo" class="md-header__button md-logo" aria-label="libplacebo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            libplacebo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic windowing / output example
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://code.videolan.org/videolan/libplacebo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m504 204.6-.7-1.8L433.6 21c-1.4-3.6-3.9-6.6-7.2-8.6-2.4-1.6-5.1-2.5-8-2.8s-5.7.1-8.4 1.1-5.1 2.7-7.1 4.8c-1.9 2.1-3.3 4.7-4.1 7.4l-47 144H161.3l-47.1-144c-.8-2.8-2.2-5.3-4.1-7.4-2-2.1-4.4-3.7-7.1-4.8-2.6-1-5.5-1.4-8.4-1.1s-5.6 1.2-8 2.8c-3.2 2-5.8 5.1-7.2 8.6L9.8 202.8l-.8 1.8c-10 26.2-11.3 55-3.5 82 7.7 26.9 24 50.7 46.4 67.6l.3.2.6.4 106 79.5c38.5 29.1 66.7 50.3 84.6 63.9 3.7 1.9 8.3 4.3 13 4.3s9.3-2.4 13-4.3c17.9-13.5 46.1-34.9 84.6-63.9l106.7-79.9.3-.3c22.4-16.9 38.7-40.6 45.6-67.5 8.6-27 7.4-55.8-2.6-82"/></svg>
  </div>
  <div class="md-source__repository">
    videolan/libplacebo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="libplacebo" class="md-nav__button md-logo" aria-label="libplacebo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    libplacebo
  </label>
  
    <div class="md-nav__source">
      <a href="https://code.videolan.org/videolan/libplacebo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m504 204.6-.7-1.8L433.6 21c-1.4-3.6-3.9-6.6-7.2-8.6-2.4-1.6-5.1-2.5-8-2.8s-5.7.1-8.4 1.1-5.1 2.7-7.1 4.8c-1.9 2.1-3.3 4.7-4.1 7.4l-47 144H161.3l-47.1-144c-.8-2.8-2.2-5.3-4.1-7.4-2-2.1-4.4-3.7-7.1-4.8-2.6-1-5.5-1.4-8.4-1.1s-5.6 1.2-8 2.8c-3.2 2-5.8 5.1-7.2 8.6L9.8 202.8l-.8 1.8c-10 26.2-11.3 55-3.5 82 7.7 26.9 24 50.7 46.4 67.6l.3.2.6.4 106 79.5c38.5 29.1 66.7 50.3 84.6 63.9 3.7 1.9 8.3 4.3 13 4.3s9.3-2.4 13-4.3c17.9-13.5 46.1-34.9 84.6-63.9l106.7-79.9.3-.3c22.4-16.9 38.7-40.6 45.6-67.5 8.6-27 7.4-55.8-2.6-82"/></svg>
  </div>
  <div class="md-source__repository">
    videolan/libplacebo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Using
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Using
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Basic windowing / output example
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Basic windowing / output example
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-pl_log" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a pl_log
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a pl_log">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameter-structs" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter structs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#destructors" class="md-nav__link">
    <span class="md-ellipsis">
      Destructors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-window" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a window
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pl_gpu" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the pl_gpu
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-swapchain" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a swapchain
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-pixels-on-the-screen" class="md-nav__link">
    <span class="md-ellipsis">
      Getting pixels on the screen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting pixels on the screen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interlude-rendering-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude: Rendering commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../renderer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rendering content: pl_frame, pl_renderer, and pl_queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-shaders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Shaders (mpv .hook syntax)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Options
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Developing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GLSL shader system
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-pl_log" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a pl_log
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a pl_log">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameter-structs" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter structs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#destructors" class="md-nav__link">
    <span class="md-ellipsis">
      Destructors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-window" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a window
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pl_gpu" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the pl_gpu
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-swapchain" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a swapchain
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-pixels-on-the-screen" class="md-nav__link">
    <span class="md-ellipsis">
      Getting pixels on the screen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting pixels on the screen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interlude-rendering-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude: Rendering commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="basic-windowing-output-example">Basic windowing / output example</h1>
<p>We will demonstrate the basics of the libplacebo GPU output API with a worked
example. The goal is to show a simple color on screen.</p>
<h2 id="creating-a-pl_log">Creating a <code>pl_log</code></h2>
<p>Almost all major entry-points into libplacebo require providing a log
callback (or <code>NULL</code> to disable logging). This is abstracted into the <code>pl_log</code>
object type, which we can create with
<code>pl_log_create</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libplacebo/log.h&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">pl_log</span><span class="w"> </span><span class="n">pllog</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="p">{</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="n">pllog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_log_create</span><span class="p">(</span><span class="n">PL_API_VER</span><span class="p">,</span><span class="w"> </span><span class="n">pl_log_params</span><span class="p">(</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="p">.</span><span class="n">log_cb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_log_color</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">        </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PL_LOG_INFO</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="p">));</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="n">pl_log_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pllog</span><span class="p">);</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Compiling</p>
<p>You can compile this example with:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>gcc<span class="w"> </span>example.c<span class="w"> </span>-o<span class="w"> </span>example<span class="w"> </span><span class="sb">`</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>libplacebo<span class="sb">`</span>
</code></pre></div>
</div>
<p>The parameter <code>PL_API_VER</code> has no special significance and is merely included
for historical reasons. Aside from that, this snippet introduces a number of
core concepts of the libplacebo API:</p>
<h3 id="parameter-structs">Parameter structs</h3>
<p>For extensibility, almost all libplacebo calls take a pointer to a <code>const
struct pl_*_params</code>, into which all extensible parameters go. For convenience,
libplacebo provides macros which create anonymous params structs on the stack
(and also fill in default parameters). Note that this only works for C99 and
above, users of C89 and C++ must initialize parameter structs manually.</p>
<p>Under the hood, <code>pl_log_params(...)</code> just translates to <code>&amp;((struct
pl_log_params) { /* default params */, ... })</code>. This style of API allows
libplacebo to effectively simulate optional named parameters.</p>
<div class="admonition note">
<p class="admonition-title">On default parameters</p>
<p>Wherever possible, parameters are designed in such a way that <code>{0}</code> gives
you a minimal parameter structure, with default behavior and no optional
features enabled. This is done for forwards compatibility - as new
features are introduced, old struct initializers will simply opt out of
them.</p>
</div>
<h3 id="destructors">Destructors</h3>
<p>All libplacebo objects must be destroyed manually using the corresponding
<code>pl_*_destroy</code> call, which takes a pointer to the variable the object is
stored in. The resulting variable is written to <code>NULL</code>. This helps prevent
use-after-free bugs.</p>
<div class="admonition note">
<p class="admonition-title">NULL</p>
<p>As a general rule, all libplacebo destructors are safe to call on
variables containing <code>NULL</code>. So, users need not explicitly <code>NULL</code>-test
before calling destructors on variables.</p>
</div>
<h2 id="creating-a-window">Creating a window</h2>
<p>While libplacebo can work in isolation, to render images offline, for the sake
of this guide we want to provide something graphical on-screen. As such, we
need to create some sort of window. Libplacebo provides no built-in mechanism
for this, it assumes the API user will already have a windowing system
in-place.</p>
<p>Complete examples (based on GLFW and SDL) can be found <a href="https://code.videolan.org/videolan/libplacebo/-/tree/master/demos">in the libplacebo
demos</a>. But
for now, we will focus on getting a very simple window on-screen using GLFW:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// ...</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="hll"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;GLFW/glfw3.h&gt;</span>
</span><a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="hll"><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;libplacebo demo&quot;</span><span class="p">;</span>
</span><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="hll"><span class="kt">int</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span>
</span><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="hll"><span class="kt">int</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span>
</span><a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="hll"><span class="n">GLFWwindow</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="p">;</span>
</span><a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="p">{</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="n">pllog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_log_create</span><span class="p">(</span><span class="n">PL_API_VER</span><span class="p">,</span><span class="w"> </span><span class="n">pl_log_params</span><span class="p">(</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">        </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PL_LOG_INFO</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="p">));</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwInit</span><span class="p">())</span>
</span><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><a id="__codelineno-2-19" name="__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="hll"><span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glfwCreateWindow</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">window</span><span class="p">)</span>
</span><a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><a id="__codelineno-2-23" name="__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="hll"><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="p">(</span><span class="n">window</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="hll"><span class="w">        </span><span class="n">glfwWaitEvents</span><span class="p">();</span>
</span><a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-2-27" name="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="hll"><span class="w">    </span><span class="n">glfwDestroyWindow</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
</span><a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="hll"><span class="w">    </span><span class="n">glfwTerminate</span><span class="p">();</span>
</span><a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">    </span><span class="n">pl_log_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pllog</span><span class="p">);</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Compiling</p>
<p>We now also need to include the glfw3 library to compile this example.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>gcc<span class="w"> </span>example.c<span class="w"> </span>-o<span class="w"> </span>example<span class="w"> </span><span class="sb">`</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>glfw3<span class="w"> </span>libplacebo<span class="sb">`</span>
</code></pre></div>
</div>
<h2 id="creating-the-pl_gpu">Creating the <code>pl_gpu</code></h2>
<p>All GPU operations are abstracted into an internal <code>pl_gpu</code> object, which
serves as the primary entry-point to any sort of GPU interaction. This object
cannot be created directly, but must be obtained from some graphical API:
currently there are Vulkan, OpenGL or D3D11. A <code>pl_gpu</code> can be accessed from
an API-specific object like <code>pl_vulkan</code>, <code>pl_opengl</code> and <code>pl_d3d11</code>.</p>
<p>In this guide, for simplicity, we will be using OpenGL, simply because that's
what GLFW initializes by default.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">// ...</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="hll"><span class="n">pl_opengl</span><span class="w"> </span><span class="n">opengl</span><span class="p">;</span>
</span><a id="__codelineno-4-4" name="__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">make_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
</span><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">release_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
</span><a id="__codelineno-4-7" name="__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">{</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glfwCreateWindow</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">window</span><span class="p">)</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="hll"><span class="w">    </span><span class="n">opengl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_opengl_create</span><span class="p">(</span><span class="n">pllog</span><span class="p">,</span><span class="w"> </span><span class="n">pl_opengl_params</span><span class="p">(</span>
</span><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">get_proc_addr</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">glfwGetProcAddress</span><span class="p">,</span>
</span><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">allow_software</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w">         </span><span class="c1">// allow software rasterers</span>
</span><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">debug</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w">         </span><span class="c1">// enable error reporting</span>
</span><a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">make_current</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">make_current</span><span class="p">,</span><span class="w"> </span><span class="c1">// (1)</span>
</span><a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">release_current</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">release_current</span><span class="p">,</span>
</span><a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="hll"><span class="w">    </span><span class="p">));</span>
</span><a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">opengl</span><span class="p">)</span>
</span><a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><a id="__codelineno-4-24" name="__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="p">(</span><span class="n">window</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">        </span><span class="n">glfwWaitEvents</span><span class="p">();</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="hll"><span class="w">    </span><span class="n">pl_opengl_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opengl</span><span class="p">);</span>
</span><a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="w">    </span><span class="n">glfwDestroyWindow</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="w">    </span><span class="n">glfwTerminate</span><span class="p">();</span>
<a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="w">    </span><span class="n">pl_log_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pllog</span><span class="p">);</span>
<a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="p">}</span>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a>
<a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">make_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">)</span>
</span><a id="__codelineno-4-37" name="__codelineno-4-37"></a><span class="hll"><span class="p">{</span>
</span><a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="hll"><span class="w">    </span><span class="n">glfwMakeContextCurrent</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
</span><a id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="hll">
</span><a id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">release_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">)</span>
</span><a id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="hll"><span class="p">{</span>
</span><a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="hll"><span class="w">    </span><span class="n">glfwMakeContextCurrent</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span><a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="hll"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>
<p>Setting this allows the resulting <code>pl_gpu</code> to be thread-safe, which
    enables asynchronous transfers to be used. The alternative is to simply
    call <code>glfwMakeContextCurrent</code> once after creating the window.</p>
<p>This method of making the context current is generally preferred,
however, so we've demonstrated it here for completeness' sake.</p>
</li>
</ol>
<h2 id="creating-a-swapchain">Creating a swapchain</h2>
<p>All access to window-based rendering commands are abstracted into an object
known as a "swapchain" (from Vulkan terminology), including the default
backbuffers on D3D11 and OpenGL. If we want to present something to screen,
we need to first create a <code>pl_swapchain</code>.</p>
<p>We can use this swapchain to perform the equivalent of <code>gl*SwapBuffers</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1">// ...</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="hll"><span class="n">pl_swapchain</span><span class="w"> </span><span class="n">swchain</span><span class="p">;</span>
</span><a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">resize_cb</span><span class="p">(</span><span class="n">GLFWwindow</span><span class="w"> </span><span class="o">*</span><span class="n">win</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_w</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_h</span><span class="p">)</span>
</span><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="hll"><span class="p">{</span>
</span><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="hll"><span class="w">    </span><span class="n">width</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">new_w</span><span class="p">;</span>
</span><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="hll"><span class="w">    </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_h</span><span class="p">;</span>
</span><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="hll"><span class="w">    </span><span class="n">pl_swapchain_resize</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">height</span><span class="p">);</span>
</span><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-5-10" name="__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">opengl</span><span class="p">)</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="hll"><span class="w">    </span><span class="n">swchain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_opengl_create_swapchain</span><span class="p">(</span><span class="n">opengl</span><span class="p">,</span><span class="w"> </span><span class="n">pl_opengl_swapchain_params</span><span class="p">(</span>
</span><a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">swap_buffers</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">))</span><span class="w"> </span><span class="n">glfwSwapBuffers</span><span class="p">,</span>
</span><a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="hll"><span class="w">        </span><span class="p">.</span><span class="n">priv</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="p">,</span>
</span><a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="hll"><span class="w">    </span><span class="p">));</span>
</span><a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">swchain</span><span class="p">)</span>
</span><a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><a id="__codelineno-5-23" name="__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="hll"><span class="w">    </span><span class="c1">// (2)</span>
</span><a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_resize</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">height</span><span class="p">))</span>
</span><a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="hll"><span class="w">    </span><span class="n">glfwSetFramebufferSizeCallback</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="n">resize_cb</span><span class="p">);</span>
</span><a id="__codelineno-5-28" name="__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="p">(</span><span class="n">window</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="hll"><span class="w">        </span><span class="n">pl_swapchain_swap_buffers</span><span class="p">(</span><span class="n">swchain</span><span class="p">);</span>
</span><a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="hll"><span class="w">        </span><span class="n">glfwPollEvents</span><span class="p">();</span><span class="w"> </span><span class="c1">// (1)</span>
</span><a id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-33" name="__codelineno-5-33"></a>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="hll"><span class="w">    </span><span class="n">pl_swapchain_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swchain</span><span class="p">);</span>
</span><a id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="w">    </span><span class="n">pl_opengl_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opengl</span><span class="p">);</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">    </span><span class="n">glfwDestroyWindow</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a><span class="w">    </span><span class="n">glfwTerminate</span><span class="p">();</span>
<a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="w">    </span><span class="n">pl_log_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pllog</span><span class="p">);</span>
<a id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>
<p>We change this from <code>glfwWaitEvents</code> to <code>glfwPollEvents</code> because
    we now want to re-run our main loop once per vsync, rather than only when
    new events arrive.  The <code>pl_swapchain_swap_buffers</code> call will ensure
    that this does not execute too quickly.</p>
</li>
<li>
<p>The swapchain needs to be resized to fit the size of the window, which in
    GLFW is handled by listening to a callback. In addition to setting this
    callback, we also need to inform the swapchain of the initial window size.</p>
<p>Note that the <code>pl_swapchain_resize</code> function handles both resize requests
and size queries - hence, the actual swapchain size is returned back to
the passed variables.</p>
</li>
</ol>
<h2 id="getting-pixels-on-the-screen">Getting pixels on the screen</h2>
<p>With a swapchain in hand, we're now equipped to start drawing pixels to the
screen:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1">// ...</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="hll"><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">render_frame</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pl_swapchain_frame</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span>
</span><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="hll"><span class="p">{</span>
</span><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="hll"><span class="w">    </span><span class="n">pl_gpu</span><span class="w"> </span><span class="n">gpu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opengl</span><span class="o">-&gt;</span><span class="n">gpu</span><span class="p">;</span>
</span><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="hll">
</span><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="hll"><span class="w">    </span><span class="n">pl_tex_clear</span><span class="p">(</span><span class="n">gpu</span><span class="p">,</span><span class="w"> </span><span class="n">frame</span><span class="p">.</span><span class="n">fbo</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">[</span><span class="mi">4</span><span class="p">]){</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">});</span>
</span><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="p">{</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="p">(</span><span class="n">window</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="hll"><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">pl_swapchain_frame</span><span class="w"> </span><span class="n">frame</span><span class="p">;</span>
</span><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="hll"><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_start_frame</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">frame</span><span class="p">))</span>
</span><a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="hll"><span class="w">            </span><span class="n">glfwWaitEvents</span><span class="p">();</span><span class="w"> </span><span class="c1">// (1)</span>
</span><a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="hll"><span class="w">        </span><span class="n">render_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">);</span>
</span><a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="hll"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_submit_frame</span><span class="p">(</span><span class="n">swchain</span><span class="p">))</span>
</span><a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="hll"><span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// (2)</span>
</span><a id="__codelineno-6-21" name="__codelineno-6-21"></a>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">        </span><span class="n">pl_swapchain_swap_buffers</span><span class="p">(</span><span class="n">swchain</span><span class="p">);</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">        </span><span class="n">glfwPollEvents</span><span class="p">();</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>
<p>If <code>pl_swapchain_start_frame</code> fails, it typically means the window is
    hidden, minimized or blocked. This is not a fatal condition, and as such
    we simply want to process window events until we can resume rendering.</p>
</li>
<li>
<p>If <code>pl_swapchain_submit_frame</code> fails, it typically means the window has
    been lost, and further rendering commands are not expected to succeed.
    As such, in this case, we simply terminate the example program.</p>
</li>
</ol>
<p>Our main render loop has changed into a combination of
<code>pl_swapchain_start_frame</code>, rendering, and <code>pl_swapchain_submit_frame</code>. To
start with, we simply use the <code>pl_tex_clear</code> function to blit a constant
orange color to the framebuffer.</p>
<h3 id="interlude-rendering-commands">Interlude: Rendering commands</h3>
<p>The previous code snippet represented our first foray into the <code>pl_gpu</code> API.
For more detail on this API, see the <a href="#TODO">GPU API</a> section. But as a
general rule of thumb, all <code>pl_gpu</code>-level operations are thread safe,
asynchronous (except when returning something to the CPU), and internally
refcounted (so you can destroy all objects as soon as you no longer need the
reference).</p>
<p>In the example loop, <code>pl_swapchain_swap_buffers</code> is the only operation that
actually flushes commands to the GPU. You can force an early flush with
<code>pl_gpu_flush()</code> or <code>pl_gpu_finish()</code>, but other than that, commands will
"queue" internally and complete asynchronously at some unknown point in time,
until forward progress is needed (e.g. <code>pl_tex_download</code>).</p>
<h2 id="conclusion">Conclusion</h2>
<p>We have demonstrated how to create a window, how to initialize the libplacebo
API, create a GPU instance based on OpenGL, and how to write a basic rendering
loop that blits a single color to the framebuffer.</p>
<p>Here is a complete transcript of the example we built in this section:</p>
<details class="example">
<summary>Basic rendering</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span>
<span class="normal"><a href="#__codelineno-7-32">32</a></span>
<span class="normal"><a href="#__codelineno-7-33">33</a></span>
<span class="normal"><a href="#__codelineno-7-34">34</a></span>
<span class="normal"><a href="#__codelineno-7-35">35</a></span>
<span class="normal"><a href="#__codelineno-7-36">36</a></span>
<span class="normal"><a href="#__codelineno-7-37">37</a></span>
<span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span>
<span class="normal"><a href="#__codelineno-7-45">45</a></span>
<span class="normal"><a href="#__codelineno-7-46">46</a></span>
<span class="normal"><a href="#__codelineno-7-47">47</a></span>
<span class="normal"><a href="#__codelineno-7-48">48</a></span>
<span class="normal"><a href="#__codelineno-7-49">49</a></span>
<span class="normal"><a href="#__codelineno-7-50">50</a></span>
<span class="normal"><a href="#__codelineno-7-51">51</a></span>
<span class="normal"><a href="#__codelineno-7-52">52</a></span>
<span class="normal"><a href="#__codelineno-7-53">53</a></span>
<span class="normal"><a href="#__codelineno-7-54">54</a></span>
<span class="normal"><a href="#__codelineno-7-55">55</a></span>
<span class="normal"><a href="#__codelineno-7-56">56</a></span>
<span class="normal"><a href="#__codelineno-7-57">57</a></span>
<span class="normal"><a href="#__codelineno-7-58">58</a></span>
<span class="normal"><a href="#__codelineno-7-59">59</a></span>
<span class="normal"><a href="#__codelineno-7-60">60</a></span>
<span class="normal"><a href="#__codelineno-7-61">61</a></span>
<span class="normal"><a href="#__codelineno-7-62">62</a></span>
<span class="normal"><a href="#__codelineno-7-63">63</a></span>
<span class="normal"><a href="#__codelineno-7-64">64</a></span>
<span class="normal"><a href="#__codelineno-7-65">65</a></span>
<span class="normal"><a href="#__codelineno-7-66">66</a></span>
<span class="normal"><a href="#__codelineno-7-67">67</a></span>
<span class="normal"><a href="#__codelineno-7-68">68</a></span>
<span class="normal"><a href="#__codelineno-7-69">69</a></span>
<span class="normal"><a href="#__codelineno-7-70">70</a></span>
<span class="normal"><a href="#__codelineno-7-71">71</a></span>
<span class="normal"><a href="#__codelineno-7-72">72</a></span>
<span class="normal"><a href="#__codelineno-7-73">73</a></span>
<span class="normal"><a href="#__codelineno-7-74">74</a></span>
<span class="normal"><a href="#__codelineno-7-75">75</a></span>
<span class="normal"><a href="#__codelineno-7-76">76</a></span>
<span class="normal"><a href="#__codelineno-7-77">77</a></span>
<span class="normal"><a href="#__codelineno-7-78">78</a></span>
<span class="normal"><a href="#__codelineno-7-79">79</a></span>
<span class="normal"><a href="#__codelineno-7-80">80</a></span>
<span class="normal"><a href="#__codelineno-7-81">81</a></span>
<span class="normal"><a href="#__codelineno-7-82">82</a></span>
<span class="normal"><a href="#__codelineno-7-83">83</a></span>
<span class="normal"><a href="#__codelineno-7-84">84</a></span>
<span class="normal"><a href="#__codelineno-7-85">85</a></span>
<span class="normal"><a href="#__codelineno-7-86">86</a></span>
<span class="normal"><a href="#__codelineno-7-87">87</a></span>
<span class="normal"><a href="#__codelineno-7-88">88</a></span>
<span class="normal"><a href="#__codelineno-7-89">89</a></span>
<span class="normal"><a href="#__codelineno-7-90">90</a></span>
<span class="normal"><a href="#__codelineno-7-91">91</a></span>
<span class="normal"><a href="#__codelineno-7-92">92</a></span>
<span class="normal"><a href="#__codelineno-7-93">93</a></span>
<span class="normal"><a href="#__codelineno-7-94">94</a></span>
<span class="normal"><a href="#__codelineno-7-95">95</a></span>
<span class="normal"><a href="#__codelineno-7-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;GLFW/glfw3.h&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libplacebo/log.h&gt;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libplacebo/opengl.h&gt;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libplacebo/gpu.h&gt;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;libplacebo demo&quot;</span><span class="p">;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="n">GLFWwindow</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="p">;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="n">pl_log</span><span class="w"> </span><span class="n">pllog</span><span class="p">;</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="n">pl_opengl</span><span class="w"> </span><span class="n">opengl</span><span class="p">;</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="n">pl_swapchain</span><span class="w"> </span><span class="n">swchain</span><span class="p">;</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">make_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">release_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">resize_cb</span><span class="p">(</span><span class="n">GLFWwindow</span><span class="w"> </span><span class="o">*</span><span class="n">win</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_w</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_h</span><span class="p">)</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="p">{</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="w">    </span><span class="n">width</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">new_w</span><span class="p">;</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="w">    </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_h</span><span class="p">;</span>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="w">    </span><span class="n">pl_swapchain_resize</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">height</span><span class="p">);</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="p">}</span>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">render_frame</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pl_swapchain_frame</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a><span class="p">{</span>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="w">    </span><span class="n">pl_gpu</span><span class="w"> </span><span class="n">gpu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opengl</span><span class="o">-&gt;</span><span class="n">gpu</span><span class="p">;</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="w">    </span><span class="n">pl_tex_clear</span><span class="p">(</span><span class="n">gpu</span><span class="p">,</span><span class="w"> </span><span class="n">frame</span><span class="p">.</span><span class="n">fbo</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">[</span><span class="mi">4</span><span class="p">]){</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-7-32" name="__codelineno-7-32"></a><span class="p">}</span>
<a id="__codelineno-7-33" name="__codelineno-7-33"></a>
<a id="__codelineno-7-34" name="__codelineno-7-34"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-7-35" name="__codelineno-7-35"></a><span class="p">{</span>
<a id="__codelineno-7-36" name="__codelineno-7-36"></a><span class="w">    </span><span class="n">pllog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_log_create</span><span class="p">(</span><span class="n">PL_API_VER</span><span class="p">,</span><span class="w"> </span><span class="n">pl_log_params</span><span class="p">(</span>
<a id="__codelineno-7-37" name="__codelineno-7-37"></a><span class="w">        </span><span class="p">.</span><span class="n">log_cb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_log_color</span><span class="p">,</span>
<a id="__codelineno-7-38" name="__codelineno-7-38"></a><span class="w">        </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PL_LOG_INFO</span><span class="p">,</span>
<a id="__codelineno-7-39" name="__codelineno-7-39"></a><span class="w">    </span><span class="p">));</span>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a>
<a id="__codelineno-7-41" name="__codelineno-7-41"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwInit</span><span class="p">())</span>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-7-43" name="__codelineno-7-43"></a>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a><span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glfwCreateWindow</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-7-45" name="__codelineno-7-45"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">window</span><span class="p">)</span>
<a id="__codelineno-7-46" name="__codelineno-7-46"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-7-47" name="__codelineno-7-47"></a>
<a id="__codelineno-7-48" name="__codelineno-7-48"></a><span class="w">    </span><span class="n">opengl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_opengl_create</span><span class="p">(</span><span class="n">pllog</span><span class="p">,</span><span class="w"> </span><span class="n">pl_opengl_params</span><span class="p">(</span>
<a id="__codelineno-7-49" name="__codelineno-7-49"></a><span class="w">        </span><span class="p">.</span><span class="n">get_proc_addr</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">glfwGetProcAddress</span><span class="p">,</span>
<a id="__codelineno-7-50" name="__codelineno-7-50"></a><span class="w">        </span><span class="p">.</span><span class="n">allow_software</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w">         </span><span class="c1">// allow software rasterers</span>
<a id="__codelineno-7-51" name="__codelineno-7-51"></a><span class="w">        </span><span class="p">.</span><span class="n">debug</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w">         </span><span class="c1">// enable error reporting</span>
<a id="__codelineno-7-52" name="__codelineno-7-52"></a><span class="w">        </span><span class="p">.</span><span class="n">make_current</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">make_current</span><span class="p">,</span>
<a id="__codelineno-7-53" name="__codelineno-7-53"></a><span class="w">        </span><span class="p">.</span><span class="n">release_current</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">release_current</span><span class="p">,</span>
<a id="__codelineno-7-54" name="__codelineno-7-54"></a><span class="w">    </span><span class="p">));</span>
<a id="__codelineno-7-55" name="__codelineno-7-55"></a>
<a id="__codelineno-7-56" name="__codelineno-7-56"></a><span class="w">    </span><span class="n">swchain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl_opengl_create_swapchain</span><span class="p">(</span><span class="n">opengl</span><span class="p">,</span><span class="w"> </span><span class="n">pl_opengl_swapchain_params</span><span class="p">(</span>
<a id="__codelineno-7-57" name="__codelineno-7-57"></a><span class="w">        </span><span class="p">.</span><span class="n">swap_buffers</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">))</span><span class="w"> </span><span class="n">glfwSwapBuffers</span><span class="p">,</span>
<a id="__codelineno-7-58" name="__codelineno-7-58"></a><span class="w">        </span><span class="p">.</span><span class="n">priv</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="p">,</span>
<a id="__codelineno-7-59" name="__codelineno-7-59"></a><span class="w">    </span><span class="p">));</span>
<a id="__codelineno-7-60" name="__codelineno-7-60"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">swchain</span><span class="p">)</span>
<a id="__codelineno-7-61" name="__codelineno-7-61"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-7-62" name="__codelineno-7-62"></a>
<a id="__codelineno-7-63" name="__codelineno-7-63"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_resize</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">height</span><span class="p">))</span>
<a id="__codelineno-7-64" name="__codelineno-7-64"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-7-65" name="__codelineno-7-65"></a><span class="w">    </span><span class="n">glfwSetFramebufferSizeCallback</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="n">resize_cb</span><span class="p">);</span>
<a id="__codelineno-7-66" name="__codelineno-7-66"></a>
<a id="__codelineno-7-67" name="__codelineno-7-67"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="p">(</span><span class="n">window</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-68" name="__codelineno-7-68"></a><span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">pl_swapchain_frame</span><span class="w"> </span><span class="n">frame</span><span class="p">;</span>
<a id="__codelineno-7-69" name="__codelineno-7-69"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_start_frame</span><span class="p">(</span><span class="n">swchain</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">frame</span><span class="p">))</span>
<a id="__codelineno-7-70" name="__codelineno-7-70"></a><span class="w">            </span><span class="n">glfwWaitEvents</span><span class="p">();</span>
<a id="__codelineno-7-71" name="__codelineno-7-71"></a><span class="w">        </span><span class="n">render_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">);</span>
<a id="__codelineno-7-72" name="__codelineno-7-72"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">pl_swapchain_submit_frame</span><span class="p">(</span><span class="n">swchain</span><span class="p">))</span>
<a id="__codelineno-7-73" name="__codelineno-7-73"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-7-74" name="__codelineno-7-74"></a>
<a id="__codelineno-7-75" name="__codelineno-7-75"></a><span class="w">        </span><span class="n">pl_swapchain_swap_buffers</span><span class="p">(</span><span class="n">swchain</span><span class="p">);</span>
<a id="__codelineno-7-76" name="__codelineno-7-76"></a><span class="w">        </span><span class="n">glfwPollEvents</span><span class="p">();</span>
<a id="__codelineno-7-77" name="__codelineno-7-77"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-78" name="__codelineno-7-78"></a>
<a id="__codelineno-7-79" name="__codelineno-7-79"></a><span class="w">    </span><span class="n">pl_swapchain_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swchain</span><span class="p">);</span>
<a id="__codelineno-7-80" name="__codelineno-7-80"></a><span class="w">    </span><span class="n">pl_opengl_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opengl</span><span class="p">);</span>
<a id="__codelineno-7-81" name="__codelineno-7-81"></a><span class="w">    </span><span class="n">glfwDestroyWindow</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<a id="__codelineno-7-82" name="__codelineno-7-82"></a><span class="w">    </span><span class="n">glfwTerminate</span><span class="p">();</span>
<a id="__codelineno-7-83" name="__codelineno-7-83"></a><span class="w">    </span><span class="n">pl_log_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pllog</span><span class="p">);</span>
<a id="__codelineno-7-84" name="__codelineno-7-84"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-7-85" name="__codelineno-7-85"></a><span class="p">}</span>
<a id="__codelineno-7-86" name="__codelineno-7-86"></a>
<a id="__codelineno-7-87" name="__codelineno-7-87"></a><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">make_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<a id="__codelineno-7-88" name="__codelineno-7-88"></a><span class="p">{</span>
<a id="__codelineno-7-89" name="__codelineno-7-89"></a><span class="w">    </span><span class="n">glfwMakeContextCurrent</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<a id="__codelineno-7-90" name="__codelineno-7-90"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-7-91" name="__codelineno-7-91"></a><span class="p">}</span>
<a id="__codelineno-7-92" name="__codelineno-7-92"></a>
<a id="__codelineno-7-93" name="__codelineno-7-93"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">release_current</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<a id="__codelineno-7-94" name="__codelineno-7-94"></a><span class="p">{</span>
<a id="__codelineno-7-95" name="__codelineno-7-95"></a><span class="w">    </span><span class="n">glfwMakeContextCurrent</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-7-96" name="__codelineno-7-96"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2022 Niklas Haas
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>